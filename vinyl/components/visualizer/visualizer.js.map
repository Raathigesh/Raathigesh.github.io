{"version":3,"sources":["components/visualizer/visualizer.ts"],"names":["Visualizer","Visualizer.constructor","Visualizer.registerEvents"],"mappings":";;;;;;;;;;;;;AAAA,AACA,oEADoE;AAGpE,yBAAyC,mBACzC,CAAC,CAD2D;AAC5D,gCAA8B,uCAC9B,CAAC,CADoE;AACrE,+BAA6B,sCAC7B,CAAC,CADkE;AACnE,+BAA6B,sCAC7B,CAAC,CADkE;AACnE,gCAA8B,uCAC9B,CAAC,CADoE;AACrE,yBAAuB,8BAGvB,CAAC,CAHoD;AAGrD;IAiBCA;QAjBDC,iBAkDCA;QALOA,kBAAaA,GAAGA,UAACA,IAASA;YAChCA,QAAQA,CAAAA;YACRA,KAAIA,CAACA,KAAKA,GAAGA,IAAIA,CAACA,KAAKA,CAACA;YACxBA,KAAIA,CAACA,MAAMA,GAAGA,IAAIA,CAACA,MAAMA,CAACA;QAC3BA,CAACA,CAAAA;QA/BAA,IAAIA,CAACA,QAAQA,GAAGA,IAAIA,mBAAQA,EAAEA,CAACA;QAC/BA,IAAIA,CAACA,cAAcA,GAAGA,IAAIA,+BAAcA,CAACA,kBAAkBA,CAACA,CAACA;QAC7DA,IAAIA,CAACA,cAAcA,GAAGA,IAAIA,+BAAcA,CAACA,IAAIA,CAACA,cAAcA,EAAEA,IAAIA,CAACA,QAAQA,CAACA,CAACA;QAC7EA,IAAIA,CAACA,eAAeA,GAAGA,IAAIA,iCAAeA,CAACA,IAAIA,CAACA,cAAcA,CAACA,CAACA;QAChEA,IAAIA,CAACA,eAAeA,GAAGA,IAAIA,iCAAeA,EAAEA,CAACA;QAC7CA,IAAIA,CAACA,cAAcA,EAAEA,CAACA;IACvBA,CAACA;IAEOD,mCAAcA,GAAtBA;QACEE,QAAQA,CAACA,IAAIA,CAACA,gBAAgBA,CAACA,UAAUA,EAAEA,UAAUA,CAACA;YAChD,CAAC,CAAC,eAAe,EAAE,CAAC;YACpB,CAAC,CAAC,cAAc,EAAE,CAAC;YACnB,CAAC,CAAC,YAAY,CAAC,UAAU,GAAG,MAAM,CAAC;QACvC,CAAC,EAAEA,KAAKA,CAACA,CAACA;QAEZA,QAAQA,CAACA,IAAIA,CAACA,gBAAgBA,CAACA,MAAMA,EAAEA,UAAUA,CAACA;YAC5C,CAAC,CAAC,eAAe,EAAE,CAAC;YACpB,CAAC,CAAC,cAAc,EAAE,CAAC;YAEnB,AACA,cADc;gBACV,IAAI,GAAG,CAAC,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACzC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;YACjC,QAAQ,CAAA;YACR,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAClD,CAAC,CAACA,IAAIA,CAACA,IAAIA,CAACA,EAAEA,KAAKA,CAACA,CAACA;IACzBA,CAACA;IA3CFF,yBAACA,oBAASA,CAACA;QACVA,QAAQA,EAAEA,YAAYA;KACtBA,CAACA,EACDA,eAAIA,CAACA;QACLA,WAAWA,EAAEA,uCAAuCA;KACpDA,CAACA,eA6CDA;IAADA,iBAACA;AAADA,CAlDA,AAkDCA,IAAA;AA5CY,kBAAU,aA4CtB,CAAA","file":"components/visualizer/visualizer.js","sourcesContent":["/// <reference path=\"../../../../tools/typings/angular2/angular2\" />\r\ndeclare var fabric: any;\r\ndeclare var id3: any;\r\nimport {bootstrap, Component, View} from \"angular2/angular2\"\r\nimport {AudioFileParser} from \"components/visualizer/audioFileParser\"\r\nimport {AudioProcessor} from \"components/visualizer/audioProcessor\"\r\nimport {VisualRenderer} from \"components/visualizer/visualRenderer\"\r\nimport {TrackInfoReader} from \"components/visualizer/trackInfoReader\"\r\nimport {Timeline} from \"components/timeline/timeline\"\r\n\r\n\r\n@Component({\r\n\tselector: 'visualizer'\r\n})\r\n@View({\r\n\ttemplateUrl: \"components/visualizer/visualizer.html\"\t\r\n})\r\nexport class Visualizer {\t\r\n\taudioFileParser: AudioFileParser;\r\n\taudioProcessor: AudioProcessor;\r\n\tvisualRenderer: VisualRenderer;\r\n\ttrackInfoReader: TrackInfoReader;\r\n\ttimeline: Timeline\r\n\t\r\n\ttitle: string;\r\n\t\r\n\tartist: string;\r\n\t\r\n\tconstructor(){ \t\r\n\t\tthis.timeline = new Timeline();\r\n\t\tthis.visualRenderer = new VisualRenderer('visualizerCanvas');\r\n\t\tthis.audioProcessor = new AudioProcessor(this.visualRenderer, this.timeline);\r\n\t\tthis.audioFileParser = new AudioFileParser(this.audioProcessor);  \r\n\t\tthis.trackInfoReader = new TrackInfoReader();\r\n\t\tthis.registerEvents();\r\n\t}\r\n\t\t\r\n\tprivate registerEvents(){\r\n\t \tdocument.body.addEventListener(\"dragover\", function (e) {\r\n\t        e.stopPropagation();\r\n\t        e.preventDefault();\r\n\t        e.dataTransfer.dropEffect = 'copy';\r\n\t    }, false);\r\n\t\r\n\t \tdocument.body.addEventListener(\"drop\", function (e) {\r\n\t        e.stopPropagation();\t\r\n\t        e.preventDefault();\r\n\t\r\n\t        //get the file\r\n\t        var file = e.dataTransfer.files[0];       \r\n\t\t\tthis.audioFileParser.parse(file);\r\n\t\t\tdebugger\r\n\t\t\tthis.trackInfoReader.Read(file, this.fileInfoReady);\t\t\t\r\n\t    }.bind(this), false);\r\n\t}\r\n\t\r\n\tpublic fileInfoReady = (data: any) => {\r\n\t\tdebugger\r\n\t\tthis.title = data.Title;\r\n\t\tthis.artist = data.Artist;\r\n\t}\r\n}\r\n"],"sourceRoot":"/source/"}